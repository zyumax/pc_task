## データベース設計のアンチパターンを学ぶ8

### 課題1-1
企業Aのために自社の商品管理サービスを新たに作成することになり、商品テーブルを以下のように作成しました。
```
TABLE Product {
  productCode: varchar <- これがPK（主キー）
  name: varchar
}
```
ここで`productCode`が挿しているのは現在企業Aが用意している商品カタログにつけられている商品ごとのコードです。
例えば「A106=ネジ」とか「F980=ボルト」など、商品が識別できるようになっています。

企業Aの担当者に話を聞いたところ「商品コードを見れば商品を一意に特定できる」とのことでしたので、そのまま商品コードを主キーに使ってみました。

この対応にはどのような問題点が潜んでいるでしょうか？

- 一意性が保ちにくくなる
- リレーションを組む時に、関係のあるテーブルで、外部キーにproductCodeをそのまま持たなければならない。productCodeが変更になった場合に注意が必要。外部キーに'ON UPDATE CASCADE'をつけないと、productCodeの変更が大変になると思われる。
- B-treeインデックスを貼る際に、文字列だとストレージ容量を多く使ってしまう。プレフィックスインデックスを使うなどの工夫が必要
https://qiita.com/kiyodori/items/f66a545a47dc59dd8839#%E3%83%97%E3%83%AC%E3%83%95%E3%82%A3%E3%83%83%E3%82%AF%E3%82%B9%E3%82%A4%E3%83%B3%E3%83%87%E3%83%83%E3%82%AF%E3%82%B9